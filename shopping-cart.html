<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>New Balance Document Management System</title>
  <link rel="shortcut icon" type="image/x-icon" href="./assets/img/nb-favicon.ico">
  <link rel="stylesheet" href="./dist/style/all.min.css">
</head>

<body>
  <header class="header-all text-g-1-l-1">
		<!-- Ace Responsive Menu -->
		<nav class="nb-nav" style="z-index: 99999;">
			<span class="nb-logo-box"><a class="navbar-brand" href="/"><img class="nb-logo" src="./assets/nb-logo.svg" alt="logo"></a></span>
			<!-- Menu Toggle btn-->
			<div class="menu-toggle">
				<button type="button" id="menu-btn">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<!-- Responsive Menu Structure-->
      <!--Note: declare the Menu style in the data-menu-style="horizontal" (options: horizontal, vertical, accordion) -->
			<ul id="respMenu" class="ace-responsive-menu" data-menu-style="horizontal">
				<li>
					<a href="/">
						<span class="title">Home</span>
					</a>
				</li>
				<li>
					<a href="javascript:;">
						<span class="title">Retail Concept Manual</span>
					</a>
					<!-- Level Two-->
					<ul>
						<li>
							<a href="#">Metro</a>
						</li>
						<li>
							<a href="./assets/Global FO_LL Deck.pdf" download>Factory Outlet</a>
						</li>
					</ul>
				</li>
				<li>
					<a class="" href="javascript:;">
						<span class="title">Eshop</span>
					</a>
					<ul>
						<li>
							<a href="./basic.html">Basic
							</a>
						</li>
						<li>
							<a href="javascript:;">Fixture
							</a>
							<ul>
								<li><a href="#">Metro </a>
								<ul>
									<li><a href="./morgan-li.html">Morgan Li</a></li>
								</ul>
								</li>
								<li><a href="#">Factory Outlet</a></li>
							</ul>
						</li>
						<li>
							<a href="./props.html">Props
							</a>
						</li>
					</ul>
				</li>
				<li class="last ">
					<a href="./contact.html">
						<span class="title">Contact Us</span>
					</a>
				</li>
				<li class=" ">
					<a class="right-menu" href="./login.html">
						<span class="title">Log in</span></a>
				</li>
			</ul>
		</div>
    <!-- End of Responsive Menu -->
  </header>
  <main class="container login-all mb-4">
    <!-- add to cart -->
    <div class="d-flex justify-content-end mb-2" style="position: fixed; top:70px;right: 20px; z-index: 999999;">
      <button type="button" class="btn btn-nb-info mr-2" data-toggle="modal" data-target="#cart">Cart (<span
          class="total-count"></span>)</button><button class="clear-cart btn btn-nb-secondary">Clear Cart</button>
    </div>
    <!-- add to cart -->
    <nav aria-label="breadcrumb" class="pt-4">
      <ol class="breadcrumb nb-breadcrumb text-g-1-l-1">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="./basic.html">EShop</a></li>
        <li class="breadcrumb-item active" aria-current="page">Basic Equipment</li>
      </ol>
    </nav>
    <div class="row justify-content-lg-between flex-lg-row flex-sm-column text-g-1-l-1">
      <div class="col-lg-6 col-sm-12">
        <img src="./assets/img/shop/collection/plasticMaleTopHangers.jpg" class="card-img-top" alt="...">
      </div>
      <div class="col-lg-6 col-sm-12 text-g-1-l-1">
        <h3 class="text-g-4-b-4 nb-red mt-sm-4 mt-1">Plastic Male Top Hangers (100pcs per carton)</h3>
        <p class="text-g-1-b-1">Description:</p>
        <div>2016 Plastic Male Top Hangers (grey)</div>
        <div>size: 17 inch</div>
        <div>Material: plastic</div>
        <div>Finish: transparent half grey</div>
        <p class="mt-4 text-g-1-b-1">Price</p>
        <div class="nb-red"> $55.00 USD</div>
        <p class="mt-4 text-g-1-b-1">Remarks:</p>
        <div class="mt-4">Use in contemporary performance area</div>
        <div class="mb-4">(100pcs per carton)</div>
        <!-- <div>
          <label>Quantity: </label>
          <input type="number" min="1" step="1" data-bind="value: newItemQuantity, valueUpdate: 'keyup'" />
          </span>
        </div>
        <div style="font-size: 14px;">* include local tax for USD</div> -->
        <div class="mt-4">
          <button class="btn btn-nb-primary btn-block text-g-1-l-1 mb-4 add-to-cart" name="btn_addCart"
            value="addCart">Add to Cart</button>
        </div>
      </div>
    </div>
  </main>
  <!-- footer start -->
  <div class="text-center footer-box text-g-1-l-1">
    <p> Copyright Â© 2020 New Balance. All rights reserved.</p>
  </div>
  <!-- footer end -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="./dist/js/popper.min.js"></script>
  <script type="text/javascript" src="./dist/js/bootstrap.min.js"></script>
  <script src="./dist/js/ace-responsive-menu-min.js" type="text/javascript"></script>
  <script type="text/javascript" src="./dist/js/header.js"></script>
  <script>
    // ************************************************
    // Shopping Cart API
    // ************************************************

    var shoppingCart = (function () {
      // =============================
      // Private methods and propeties
      // =============================
      cart = [];

      // Constructor
      function Item(name, price, count) {
        this.name = name;
        this.price = price;
        this.count = count;
      }

      // Save cart
      function saveCart() {
        sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
      }

      // Load cart
      function loadCart() {
        cart = JSON.parse(sessionStorage.getItem('shoppingCart'));
      }
      if (sessionStorage.getItem("shoppingCart") != null) {
        loadCart();
      }


      // =============================
      // Public methods and propeties
      // =============================
      var obj = {};

      // Add to cart
      obj.addItemToCart = function (name, price, count) {
        for (var item in cart) {
          if (cart[item].name === name) {
            cart[item].count++;
            saveCart();
            return;
          }
        }
        var item = new Item(name, price, count);
        cart.push(item);
        saveCart();
      }
      // Set count from item
      obj.setCountForItem = function (name, count) {
        for (var i in cart) {
          if (cart[i].name === name) {
            cart[i].count = count;
            break;
          }
        }
      };
      // Remove item from cart
      obj.removeItemFromCart = function (name) {
        for (var item in cart) {
          if (cart[item].name === name) {
            cart[item].count--;
            if (cart[item].count === 0) {
              cart.splice(item, 1);
            }
            break;
          }
        }
        saveCart();
      }

      // Remove all items from cart
      obj.removeItemFromCartAll = function (name) {
        for (var item in cart) {
          if (cart[item].name === name) {
            cart.splice(item, 1);
            break;
          }
        }
        saveCart();
      }

      // Clear cart
      obj.clearCart = function () {
        cart = [];
        saveCart();
      }

      // Count cart 
      obj.totalCount = function () {
        var totalCount = 0;
        for (var item in cart) {
          totalCount += cart[item].count;
        }
        return totalCount;
      }

      // Total cart
      obj.totalCart = function () {
        var totalCart = 0;
        for (var item in cart) {
          totalCart += cart[item].price * cart[item].count;
        }
        return Number(totalCart.toFixed(2));
      }

      // List cart
      obj.listCart = function () {
        var cartCopy = [];
        for (i in cart) {
          item = cart[i];
          itemCopy = {};
          for (p in item) {
            itemCopy[p] = item[p];

          }
          itemCopy.total = Number(item.price * item.count).toFixed(2);
          cartCopy.push(itemCopy)
        }
        return cartCopy;
      }

      // cart : Array
      // Item : Object/Class
      // addItemToCart : Function
      // removeItemFromCart : Function
      // removeItemFromCartAll : Function
      // clearCart : Function
      // countCart : Function
      // totalCart : Function
      // listCart : Function
      // saveCart : Function
      // loadCart : Function
      return obj;
    })();


    // *****************************************
    // Triggers / Events
    // ***************************************** 
    // Add item
    $('.add-to-cart').click(function (event) {
      event.preventDefault();
      var name = $(this).data('name');
      var price = Number($(this).data('price'));
      shoppingCart.addItemToCart(name, price, 1);
      displayCart();
    });

    // Clear items
    $('.clear-cart').click(function () {
      shoppingCart.clearCart();
      displayCart();
    });


    function displayCart() {
      var cartArray = shoppingCart.listCart();
      var output = "";
      for (var i in cartArray) {
        output += "<tr>"
          + "<td>" + cartArray[i].name + "</td>"
          + "<td>(" + cartArray[i].price + ")</td>"
          + "<td><div class='input-group'><button class='minus-item input-group-addon btn btn-primary' data-name=" + cartArray[i].name + ">-</button>"
          + "<input type='number' class='item-count form-control' data-name='" + cartArray[i].name + "' value='" + cartArray[i].count + "'>"
          + "<button class='plus-item btn btn-primary input-group-addon' data-name=" + cartArray[i].name + ">+</button></div></td>"
          + "<td><button class='delete-item btn btn-danger' data-name=" + cartArray[i].name + ">X</button></td>"
          + " = "
          + "<td>" + cartArray[i].total + "</td>"
          + "</tr>";
      }
      $('.show-cart').html(output);
      $('.total-cart').html(shoppingCart.totalCart());
      $('.total-count').html(shoppingCart.totalCount());
    }

    // Delete item button

    $('.show-cart').on("click", ".delete-item", function (event) {
      var name = $(this).data('name')
      shoppingCart.removeItemFromCartAll(name);
      displayCart();
    })


    // -1
    $('.show-cart').on("click", ".minus-item", function (event) {
      var name = $(this).data('name')
      shoppingCart.removeItemFromCart(name);
      displayCart();
    })
    // +1
    $('.show-cart').on("click", ".plus-item", function (event) {
      var name = $(this).data('name')
      shoppingCart.addItemToCart(name);
      displayCart();
    })

    // Item count input
    $('.show-cart').on("change", ".item-count", function (event) {
      var name = $(this).data('name');
      var count = Number($(this).val());
      shoppingCart.setCountForItem(name, count);
      displayCart();
    });

    displayCart();

  </script>
</body>

</html>