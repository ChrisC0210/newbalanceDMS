<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>New Balance Document Management System</title>
  <link rel="shortcut icon" type="image/x-icon" href="./assets/img/nb-favicon.ico">
  <!--CSS Style-->
  <link rel="stylesheet" href="./dist/style/all.min.css">
</head>

<body>
  <header class="header-all text-g-1-l-1">
    <!-- Ace Responsive Menu -->
    <nav class="nb-nav" style="z-index: 99999;">
      <span class="nb-logo-box"><a class="navbar-brand" href="/"><img class="nb-logo" src="./assets/nb-logo.svg"
            alt="logo"></a></span>
      <!-- Menu Toggle btn-->
      <div class="menu-toggle">
        <button type="button" id="menu-btn">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <!-- Responsive Menu Structure-->
      <!--Note: declare the Menu style in the data-menu-style="horizontal" (options: horizontal, vertical, accordion) -->
      <ul id="respMenu" class="ace-responsive-menu" data-menu-style="horizontal">
        <li>
          <a href="/">
            <span class="title">Home</span>
          </a>
        </li>
        <li>
          <a href="javascript:;">
            <span class="title">Retail Concept Manual</span>
          </a>
          <!-- Level Two-->
          <ul>
            <li>
              <a href="#">Metro</a>
            </li>
            <li>
              <a href="#">Factory Outlet</a>
            </li>
          </ul>
        </li>
        <li>
          <a class="" href="javascript:;">
            <span class="title">Eshop</span>
          </a>
          <ul>
            <li>
              <a href="#">Basic
              </a>
            </li>
            <li>
              <a href="javascript:;">Fixture
              </a>
              <ul>
                <li><a href="#">Metro </a></li>
                <li><a href="#">Factory Outlet</a></li>
              </ul>
            </li>
            <li>
              <a href="./props.html">Props
              </a>
            </li>
          </ul>
        </li>
        <li class=" ">
          <a href="./contact.html">
            <span class="title">Contact Us</span>
          </a>
        </li>
        <li class="last ">
          <a href="javascript:;">
            <span class="title nb-red">Setting</span>
          </a>
          <ul>
            <li>
              <a href="#">My Account</a>
            </li>
            <li>
              <a href="#">System Setting</a>
            </li>
            <li>
              <a href="#">Help</a>
            </li>
          </ul>
        </li>
        <li class="right-menu">
          <a href="./login200.html"><span class="title">Log out</span></a>
        </li>
      </ul>
      </div>
      <!-- End of Responsive Menu -->
  </header>
  <main class="container" style="margin-top: 80px">
    <!-- delete start -->
    <div class="alert alert-dark" role="alert">
      (5)PHP: system.php | USE: System Setting
    </div>
    <!-- delete end -->
    <!-- section start -->
    <section class="mb-4">
      <p class="text-g-5-b-5 gray-800">Copy Files</p>
      <div>
        <form name="form1" id="form1">
          <table width="800px" cellpadding="1" cellspacing="1" border="0">
            <tbody><tr>
            </tr>
            <tr>
              <td colspan="4">
                &nbsp;
              </td>
            </tr>
            <tr>
              <td width="100px">
                File to be copied
              </td>
              <td width="500px">
                <input type="text" name="file_location_display" id="file_location_display" value="" style="width:500px" readonly="true">
                <input type="hidden" name="file_location" id="file_location" value="">
              </td>
              <td width="22px" align="left">
                <a href="#" onclick="selectFileClicked(); return false;"><img src="images/find.png" border="0">Q</a>
              </td>
              <td align="left">
                <a href="#" onclick="$('#file_location').val(''); $('#file_location_display').val(''); return false;"><img src="images/clear.png" border="0">X</a>
              </td>
            </tr>
            <tr>
              <td colspan="4">
                &nbsp;
              </td>
            </tr>
            <tr>
              <td width="100px">
                Destination
              </td>
              <td width="500px">
                <input type="text" name="file_destination_display" id="file_destination_display" value="" style="width:500px" readonly="true">
                <input type="hidden" name="file_destination" id="file_destination" value="">
              </td>
              <td width="22px" align="left">
                <a href="#" onclick="selectDestinationClicked(); return false;"><img src="images/find.png" border="0"></a>
              </td>
              <td align="left">
                <a href="#" onclick="$('#file_destination').val(''); $('#file_destination_display').val(''); return false;"><img src="images/clear.png" border="0"></a>
              </td>
            </tr>
            <tr>
              <td colspan="4">
                &nbsp;
              </td>
            </tr>
            <tr>
              <td colspan="4">
                <input type="button" id="btn_copy" name="btn_copy" value="Copy" onclick="startCopy();">
              </td>
            </tr>
          </tbody></table>
        </form>
      </div>
    </section>
    <!-- section end -->
  </main>

  <!-- footer start -->
  <div class="container">
    <div class="text-center footer-box text-r-1-3-1">
      <p> Copyright Â© 2020 New Balance. All rights reserved.</p>
    </div>
  </div>
  <!-- footer end -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="./dist/js/popper.min.js"></script>
  <script type="text/javascript" src="./dist/js/bootstrap.min.js"></script>
  <script src="./dist/js/ace-responsive-menu-min.js" type="text/javascript"></script>
  <script type="text/javascript" src="./dist/js/header.js"></script>
  <script>
    $(document).ready(function(){
      $( "#file_container" ).dialog({
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
        autoOpen: false,
        modal: true,
        resizable: false,
        draggable: false,
        height: 600,
        width: 600,
        buttons: {
          Ok: function() {
            $( this ).dialog( "close" );
            $( "#file_container" ).html("");
          }
        }
      });
      
      $( "#directory_container" ).dialog({
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
        autoOpen: false,
        modal: true,
        resizable: false,
        draggable: false,
        height: 600,
        width: 600,
        buttons: {
          Ok: function() {
            $( this ).dialog( "close" );
            $( "#directory_container" ).html("");
          }
        }
      });
      
      $( "#loading_container" ).dialog({
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); },
        autoOpen: false,
        modal: true,
        resizable: false,
        closeOnEscape: false,
        draggable: false,
        height: 300,
        width: 500
      });
      
        });
    
    function selectFileClicked(){
      $('#file_container').fileTree({
        root: 'vwfBThemdNkC8eSf3TyuUb5IBmhOF5jrORTSiAP4JuKy59WUzyRqYvxeuxCMktCt',
        script: 'fileTree.php',
        expandSpeed: 500,
        collapseSpeed: 500,
        multiFolder: false,
        showFiles: true,
        fileCallBack: fileCallBack
      });
      $( "#file_container" ).dialog( "open" );
    }
    
    function fileCallBack(encrypted, path){
      $("#file_location_display").val(path.replace("//","/"));
      $("#file_location").val(encrypted);
      $( "#file_container" ).dialog( "close" );
      $( "#file_container" ).html("");
    }
    
    function selectDestinationClicked(){
      $('#directory_container').fileTree({
        root: 'vwfBThemdNkC8eSf3TyuUb5IBmhOF5jrORTSiAP4JuKy59WUzyRqYvxeuxCMktCt',
        script: 'fileTree.php',
        expandSpeed: 500,
        collapseSpeed: 500,
        multiFolder: false,
        fileCallBack: fileCallBack,
        directorySelectedCallBack: directorySelectedCallBack,
        directoryUnselectedCallBack: directoryUnselectedCallBack
      });
      $( "#directory_container" ).dialog( "open" );
    }
    
    function directorySelectedCallBack(encrypted, path){
      $("#file_destination_display").val(path.replace("//","/"));
      $("#file_destination").val(encrypted);
    }
    
    function directoryUnselectedCallBack(encrypted, path){
      $("#file_destination_display").val(path.replace("//","/"));
      $("#file_destination").val(encrypted);
    }
  
    function startCopy(){
      if($("#file_location").val() == ""){
        alert("Please select a file to copy");
        return;
      }
      
      if($("#file_destination").val() == ""){
        alert("Please select the file destination");
        return;		
      }
      
      $( "#loading_container" ).dialog( "open" );
      $.post("copy_files_act.php", { file : $("#file_location").val(), file_destination : $("#file_destination").val() }, function(data) {
        location.href = data.url;
      }, "json");
    }
  </script>
</body>

</html>